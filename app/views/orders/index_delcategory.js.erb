function delCategoryInputInSession(){
	/*Trouver et supprimer l'Ã©lement non utile */
	let divs = document.getElementsByClassName("group-form-<%= @category.name %>")
	if(divs.length > 0){
		divs[divs.length-1].remove()
		document.getElementById("puts-number-<%= @category.name %>").innerHTML = divs.length
	}
	/* Supprimer la prestation dans la session */
	let sessionPrestation = JSON.parse(sessionStorage.getItem("prestations"))
	for (var i = sessionPrestation.length - 1; i >= 0; i--) {
		if (sessionPrestation[i].category[0] == "<%= @category.name %>" && sessionPrestation[i].category[1] == <%= @category.id %>){
			// supprimer le dom dans le panier
			let card = document.getElementsByClassName("card-<%= @category.name %>")
			card[card.length-1].remove()
			
			sessionPrestation.splice(i,1)
			sessionStorage.setItem("prestations",JSON.stringify(sessionPrestation))
			break
		}
	}
}

function totalPrice(){
	let sessionPrestation = JSON.parse(sessionStorage.getItem("prestations"))

	let prixTotal = 0
	for (var i = 0 ; i < sessionPrestation.length ; i++) {
		let prestations = sessionPrestation[i].prestation
		for (var g = 0 ; g < prestations.length ; g++) {
			prixTotal += prestations[g][2]
		}
	}

	let sessionProduits = JSON.parse(sessionStorage.getItem("products"))
	for (var i = 0 ; i < sessionProduits.length ; i++) {
		prixTotal += sessionProduits[i].list[2]
	}
	document.getElementById("priceTotale").innerHTML = prixTotal.toFixed(2)
}

delCategoryInputInSession()
totalPrice()

